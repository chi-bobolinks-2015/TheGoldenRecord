function loadImage(imageUrl, cell){
  // $(cell).append("<img src=" + imageUrl + " class='mixer-image'>");

  $(cell).find("img").map(function() {return $(this).attr("src", imageUrl)});

  $(this).each(function(){
    var css = 'url("'+imageUrl+'") ';
    $(cell).find('.hex_inner').attr('style', 'width: 225px; height: 194.856px; background-image: ' + css);
    // This is where you add background color.
  });
}

function unloadImage(hex) {
    var image = "/assets/sound-categories/plus-38f39e94becd749ab1696484d51c2f63828c84573c72b496e2eb2587cad1b282.png";
   $(hex).attr('style', 'width: 225px; height: 194.856px; background-image: url(' + image + ')');
   $(hex).parent().parent().parent().find('img').attr('src', image);
}

// function showTargetTrackInControlPanel(divId){
//     var idString = divId.toString();
//     var trackTitle = $("div#" + idString).find(".inner-text").text();
//     $("p#track-title").remove();
//     $(".control-panel").append("<p id='track-title'>" + trackTitle + "</p>");
// }

// ############### set up dials ###############

function moveVolumeDial(currentMixer){
    $("#volume-dial").knob({
      'min': -1,
      'max': 11,
      'step': 1,
      'width': 75,
      'fgColor': "#222222",
      'skin': "tron",
      'thickness': .2,
      'displayPrevious': true,
      'displayInput': false,
      'change': function() { currentMixer.assignTargetVolume((this.$.val()/10)); }
    });
}

function moveEchoDial(currentMixer){
    $("#echo-dial").knob({
    'min': -1,
    'max': 11,
    'step': 1,
    'cursor': 30,
    'angleOffset': -125,
    'angleArc': 250,
    'width': 75,
    'fgColor': "#222222",
    'skin': "tron",
    'thickness': .2,
    'displayPrevious': true,
    'displayInput': false,
    'change': function() { currentMixer.assignDelayTime((this.$.val()/10));}
    });
}

function moveTempoDial(currentMixer){
    $("#tempo-dial").knob({
    'min': 2,
    'max': 100,
    'step': 1,
    'width': 75,
    'fgColor': "#222222",
    'skin': "tron",
    'thickness': .2,
    'displayPrevious': true,
    'displayInput': false,
    'change': function() { currentMixer.assignPlaybackRate(currentMixer.adjustPlayback((this.$.val()))); }
    });
}


function movePanningDial(currentMixer){
    var panningDial = $("#panning-dial")
    var selectedValue;
    panningDial.Segment();
    $(document).on("click", panningDial, function() {

      selectedValue = $(".option.active").attr("value");

      // currentMixer.mix[currentMixer.target].listener.setPosition(Number(selectedValue), 0, 0)
      currentMixer.assignPanning(Number(selectedValue));
    });
}

// function loopToggle(currentMixer){
//   $(window).load(function(event){
//     var looper = $("#loop-toggle");
//     var selectedValue;
//       looper.Segment();

//       // selectedValue = looper.children(".option.active"))
//     // $(document).on("click", looper, function(){

//       selectedValue = looper.children(".option.active");


//   //   $(".container").change("#loop-toggle", function(){

//   //     // selectedValue = $(".option.active").attr("value");
//   //     // console.log("This")
//   //     // console.log(selectedValue);
//   //     // event.preventDefault();
//   //     currentMixer.toggleLoop();
//   //     // console.log(looper);
//   //     // console.log(looper.children());
//   //     // console.log(looper.children(".option.active"));
//   //     console.log(currentMixer.mix[currentMixer.target]._audioNode[0].bufferSource.loop)
//   //   })
//   // });

// }

// function moveHighDial(current_value){
//   $(window).load(function(event){
//     // console.log("Inside of moveDial")

//     $("#high-dial").knob({
//     'min': -1,
//     'max': 11,
//     'step': 1,
//     'width': 75,
//     'fgColor': "#222222",
//     'skin': "tron",
//     'thickness': .2,
//     'displayPrevious': true,
//     'displayInput': false,
//     'change': function() { currentMixer.assignDelayTime((this.$.val()/5)); }
//     });
//   });
// }

// function moveLowDial(current_value){
//   $(window).load(function(event){
//     // console.log("Inside of moveDial")

//     $("#low-dial").knob({
//     'min': -1,
//     'max': 11,
//     'step': 1,
//     'width': 75,
//     'fgColor': "#222222",
//     'skin': "tron",
//     'thickness': .2,
//     'displayPrevious': true,
//     'displayInput': false
//     // 'change': function() { currentMixer.assignTargetVolume((this.$.val()/10)); }
//     });

//   });
// }





// 'release' : function (v) { /*make something*/ }
